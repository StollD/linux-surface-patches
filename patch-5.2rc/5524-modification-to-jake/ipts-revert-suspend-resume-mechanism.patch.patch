From 1c56c4e641a14807a007608e1fb7982d740c41e7 Mon Sep 17 00:00:00 2001
From: "Hayataka@kitakar5525" <34676735+kitakar5525@users.noreply.github.com>
Date: Fri, 28 Jun 2019 17:59:38 +0900
Subject: [PATCH] ipts-revert-suspend-resume-mechanism.patch

---
 drivers/gpu/drm/i915/i915_drv.c   |  9 ---------
 drivers/gpu/drm/i915/intel_ipts.c | 10 ----------
 drivers/gpu/drm/i915/intel_ipts.h |  2 --
 3 files changed, 21 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_drv.c b/drivers/gpu/drm/i915/i915_drv.c
index f3a175bfe..aba48295f 100644
--- a/drivers/gpu/drm/i915/i915_drv.c
+++ b/drivers/gpu/drm/i915/i915_drv.c
@@ -724,9 +724,6 @@ static int i915_load_modeset_init(struct drm_device *dev)
 
 	intel_init_ipc(dev_priv);
 
-	if (INTEL_GEN(dev_priv) >= 9 && i915_modparams.enable_guc && i915_modparams.enable_ipts)
-		intel_ipts_init(dev);
-
 	return 0;
 
 cleanup_gem:
@@ -2057,9 +2054,6 @@ static int i915_drm_suspend(struct drm_device *dev)
 	struct pci_dev *pdev = dev_priv->drm.pdev;
 	pci_power_t opregion_target_state;
 
-	if (INTEL_GEN(dev_priv) >= 9 && i915_modparams.enable_guc && i915_modparams.enable_ipts)
-		intel_ipts_suspend(dev);
-
 	disable_rpm_wakeref_asserts(dev_priv);
 
 	/* We do a lot of poking in a lot of registers, make sure they work
@@ -2256,9 +2250,6 @@ static int i915_drm_resume(struct drm_device *dev)
 
 	enable_rpm_wakeref_asserts(dev_priv);
 
-	if (INTEL_GEN(dev_priv) >= 9 && i915_modparams.enable_guc && i915_modparams.enable_ipts)
-		intel_ipts_resume(dev);
-
 	return 0;
 }
 
diff --git a/drivers/gpu/drm/i915/intel_ipts.c b/drivers/gpu/drm/i915/intel_ipts.c
index 133e2ab9b..6f9db885a 100644
--- a/drivers/gpu/drm/i915/intel_ipts.c
+++ b/drivers/gpu/drm/i915/intel_ipts.c
@@ -647,13 +647,3 @@ void intel_ipts_cleanup(struct drm_device *dev)
 		cancel_delayed_work(&intel_ipts.reacquire_db_work);
 	}
 }
-
-int intel_ipts_resume(struct drm_device *dev)
-{
-	return intel_ipts_init(dev);
-}
-
-void intel_ipts_suspend(struct drm_device *dev)
-{
-	intel_ipts_cleanup(dev);
-}
diff --git a/drivers/gpu/drm/i915/intel_ipts.h b/drivers/gpu/drm/i915/intel_ipts.h
index 45d7d1273..a6965d102 100644
--- a/drivers/gpu/drm/i915/intel_ipts.h
+++ b/drivers/gpu/drm/i915/intel_ipts.h
@@ -28,8 +28,6 @@ struct drm_device;
 
 int intel_ipts_init(struct drm_device *dev);
 void intel_ipts_cleanup(struct drm_device *dev);
-int intel_ipts_resume(struct drm_device *dev);
-void intel_ipts_suspend(struct drm_device *dev);
 int intel_ipts_notify_backlight_status(bool backlight_on);
 int intel_ipts_notify_complete(void);
 
-- 
2.22.0

